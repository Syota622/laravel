# URL
- http://localhost:8000/

# docker-compose コマンド
- docker-compose -f docker/compose.yml up
- docker-compose -f docker/compose.yml up --build
- docker-compose -f docker/compose.yml build
- docker-compose -f docker/compose.yml build --no-cache
- docker-compose -f docker/compose.yml down -v

# コンテナに入る
- docker-compose -f docker/compose.yml exec app bash
- docker-compose -f docker/compose.yml exec db mysql -u root -pPassw0rd -D laravel

# キャッシュクリア
- docker-compose -f docker/compose.yml exec app php artisan route:clear
- docker-compose -f docker/compose.yml exec app php artisan config:clear
- docker-compose -f docker/compose.yml exec app php artisan cache:clear
- docker-compose -f docker/compose.yml exec app php artisan view:clear

# マイグレーション
- docker-compose -f docker/compose.yml exec app php artisan migrate
- docker-compose -f docker/compose.yml exec app php artisan make:migration create_posts_table --create=posts
- docker-compose -f docker/compose.yml exec app php artisan make:migration create_sqs_messages_table --create=sqs_messages

# コントローラーの生成
- docker-compose -f docker/compose.yml exec app php artisan make:controller Auth/RegisterController
- docker-compose -f docker/compose.yml exec app php artisan make:controller Auth/LoginController
- docker-compose -f docker/compose.yml exec app php artisan make:controller PostController
- docker-compose -f docker/compose.yml exec app php artisan make:controller MessageController
- docker-compose -f docker/compose.yml exec app php artisan make:controller MessageProcessingController
- docker-compose -f docker/compose.yml exec app php artisan make:middleware VerifyCustomHeader

# モデルの生成
- docker-compose -f docker/compose.yml exec app php artisan make:model User -m
- docker-compose -f docker/compose.yml exec app php artisan make:model Post
- docker-compose -f docker/compose.yml exec app php artisan make:model SqsMessage

# ジョブの生成
- docker-compose -f docker/compose.yml exec app php artisan make:job SendToSQS
- docker-compose -f docker/compose.yml exec app php artisan make:job ProcessSqsMessage

# composer
- docker-compose -f docker/compose.yml exec app composer require aws/aws-sdk-php

# queue
- docker-compose -f docker/compose.yml exec app php artisan queue:restart
- docker-compose -f docker/compose.yml exec app php artisan queue:work --verbose
- docker-compose -f docker/compose.yml exec app php artisan queue:work sqs
- docker-compose -f docker/compose.yml exec app php artisan queue:work sqs --verbose

# curl
csrf_token=$(curl -s -c cookies.txt http://localhost:8000/register | perl -nle 'print $1 if /name="_token" value="([^"]+)"/')

- -c cookies.txtオプションを使って、セッション情報（クッキー）を保存しています。
- -b cookies.txtオプションを使って、保存したセッション情報をリクエストに含めています。
```sh
curl -b cookies.txt -c cookies.txt -X POST http://localhost:8000/register \
    -H "X-Custom-Header: B9mU2TJe-test" \
    -H "X-CSRF-TOKEN: $csrf_token" \
    -H "Content-Type: application/x-www-form-urlencoded" \
    --data-urlencode "name=test300" \
    --data-urlencode "email=test300@example.com" \
    --data-urlencode "password=Passw0rd" \
    --data-urlencode "password_confirmation=Passw0rd" \
    --data-urlencode "_token=$csrf_token"

(base) suzukishouta@shota laravel % cat cookies.txt 
# Netscape HTTP Cookie File
# https://curl.se/docs/http-cookies.html
# This file was generated by libcurl! Edit at your own risk.

localhost       FALSE   /       FALSE   1717254000      XSRF-TOKEN      testtesttesttestSSnJUtestSmVaMEEteststdVFjdVIzNk1UWDdZZXdLYVd1QUttestrN0h2Z1VKSy9WR2dYa0wiLCJtYWMiOiI4NmU4ZWQxNGVkMTQxZGFlYzM1MjJmYWZjYzUzMTFmYWFkZjgxNDMyNTFmNmQ1MTE2MjMwtest%3D
#HttpOnly_localhost     FALSE   /       FALSE   1717254000      laravel_session testtesttesttestSSnJUtestSmVaMEEteststdVFjdVIzNk1UWDdZZXdLYVd1QUttestrN0h2Z1VKSy9WR2dYa0wiLCJtYWMiOiI4NmU4ZWQxNGVkMTQxZGFlYzM1MjJmYWZjYzUzMTFmYWFkZjgxNDMyNTFmNmQ1MTE2MjMwtest%3D
```
